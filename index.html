<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>身材管理器</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "微软雅黑", sans-serif;
        }

        body {
            background: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            background: white;
            max-width: 800px;
            width: 100%;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .title {
            text-align: center;
            color: #1a73e8;
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
        }

        .input-group {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }

        .input-group input, .select-target {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
        }

        .target-btn {
            display: flex;
            gap: 10px;
            margin: 20px 0;
        }

        .btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f0f0f0;
            color: #333;
        }

        .btn.active {
            background: #1a73e8;
            color: white;
        }

        #generateBtn {
            width: 100%;
            padding: 12px;
            background: #1a73e8;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
        }

        .loading {
            display: none;
            text-align: center;
            margin-top: 15px;
            color: #666;
        }

        .result {
            margin-top: 30px;
            display: none;
        }

        .plan-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .plan-title {
            color: #1a73e8;
            margin-bottom: 15px;
        }

        .daily-plan {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .daily-item {
            background: white;
            padding: 18px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        @media (max-width: 600px) {
            .input-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h2 class="title">身材管理计划生成器</h2>
        <form id="bodyForm">
            <div class="form-group">
                <label>当前体重（kg）</label>
                <input type="number" id="weight" placeholder="请输入当前体重" required>
            </div>

            <div class="form-group">
                <label>身高（cm）</label>
                <input type="number" id="height" placeholder="请输入身高" required>
            </div>

            <div class="form-group">
                <label>年龄</label>
                <input type="number" id="age" placeholder="请输入年龄" required>
            </div>

            <div class="form-group">
                <label>目标类型</label>
                <div class="target-btn">
                    <button class="btn active" data-target="lose">减肥</button>
                    <button class="btn" data-target="gain">增肌</button>
                    <button class="btn" data-target="shape">塑形</button>
                </div>
            </div>

            <div class="form-group" id="targetInputGroup">
                <!-- 目标值输入框将动态生成 -->
            </div>

            <div class="loading">生成中...</div>
            <button type="submit" id="generateBtn">生成专属计划</button>
        </form>

        <div class="result" id="resultArea">
            <div class="plan-card">
                <h3 class="plan-title">基础指标分析</h3>
                <p><strong>BMI</strong>: <span id="bmiValue"></span></p>
                <p><strong>目标</strong>: <span id="targetDesc"></span></p>
            </div>

            <div class="plan-card">
                <h3 class="plan-title">每日饮食计划</h3>
                <div id="dietPlan"></div>
            </div>

            <div class="plan-card">
                <h3 class="plan-title">每周运动计划</h3>
                <div id="exercisePlan"></div>
            </div>
        </div>
    </div>

    <script>
        // 目标类型配置
        const TARGET_CONFIG = {
            lose: {
                name: "减肥",
                unit: "kg",
                placeholder: "请输入目标体重（低于当前体重）"
            },
            gain: {
                name: "增肌",
                unit: "kg",
                placeholder: "请输入目标体重（高于当前体重）"
            },
            shape: {
                name: "塑形",
                unit: "%",
                placeholder: "请输入目标体脂率（如20）"
            }
        };

        // 饮食/运动库
        const DIET_LIBRARY = {
            lose: ["鸡胸肉沙拉", "燕麦粥", "清蒸鱼", "西兰花炒虾仁"],
            gain: ["牛肉炒饭", "蛋白粉奶昔", "坚果拼盘", "全麦面包"],
            shape: ["三文鱼", "希腊酸奶", "藜麦沙拉", "水煮蛋"]
        };

        const EXERCISE_LIBRARY = {
            lose: ["慢跑", "跳绳", "HIIT"],
            gain: ["举重", "深蹲", "卧推"],
            shape: ["瑜伽", "普拉提", "动感单车"]
        };

        // 初始化目标输入框
        function initTargetInput() {
            const targetInputGroup = document.getElementById('targetInputGroup');
            targetInputGroup.innerHTML = ``; // 清空旧内容

            const btns = document.querySelectorAll('.btn');
            btns.forEach(btn => {
                btn.addEventListener('click', function () {
                    btns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    const target = this.dataset.target;
                    renderTargetInput(target);
                });
            });

            // 默认选中第一个按钮
            document.querySelector('[data-target="lose"]').classList.add('active');
            renderTargetInput('lose');
        }

        // 渲染目标输入框
        function renderTargetInput(target) {
            const config = TARGET_CONFIG[target];
            const targetInputGroup = document.getElementById('targetInputGroup');
            targetInputGroup.innerHTML = `
                <label>目标值${config.unit}</label>
                <input type="number" id="targetValue" placeholder="${config.placeholder}" required>
            `;
        }

        // 计算BMI
        function calculateBMI(weight, height) {
            return (weight / ((height / 100) ** 2)).toFixed(1);
        }

        // 生成饮食计划
        function generateDietPlan(target) {
            const items = DIET_LIBRARY[target].map(item => `<div class="daily-item">${item}</div>`);
            return items.join('');
        }

        // 生成运动计划
        function generateExercisePlan(target, age) {
            const exercises = EXERCISE_LIBRARY[target];
            const plan = exercises.map((item, index) => `
                <div class="daily-item">
                    <strong>第${index+1}天</strong>: ${item} (30-45分钟)
                </div>
            `);
            return plan.join('');
        }

        // 主函数：生成计划
        async function generatePlan(e) {
            e.preventDefault();
            const loading = document.querySelector('.loading');
            const resultArea = document.getElementById('resultArea');
            const weight = parseFloat(document.getElementById('weight').value);
            const height = parseFloat(document.getElementById('height').value);
            const age = parseInt(document.getElementById('age').value);
            const targetBtn = document.querySelector('.btn.active');
            const target = targetBtn.dataset.target;
            const targetValue = parseFloat(document.getElementById('targetValue').value);
            const bmi = calculateBMI(weight, height);

            // 显示加载状态
            loading.style.display = "block";
            resultArea.style.display = "none";
            document.getElementById('generateBtn').disabled = true;

            // 模拟异步计算（实际可移除）
            await new Promise(resolve => setTimeout(resolve, 1500));

            // 生成结果
            const targetDesc = `${TARGET_CONFIG[target].name}：${targetValue}${TARGET_CONFIG[target].unit}`;
            const dietHtml = generateDietPlan(target);
            const exerciseHtml = generateExercisePlan(target, age);

            // 渲染结果
            document.getElementById('bmiValue').textContent = bmi;
            document.getElementById('targetDesc').textContent = targetDesc;
            document.getElementById('dietPlan').innerHTML = dietHtml;
            document.getElementById('exercisePlan').innerHTML = exerciseHtml;

            // 隐藏加载，显示结果
            loading.style.display = "none";
            resultArea.style.display = "block";
            document.getElementById('generateBtn').disabled = false;
        }

        // 初始化
        initTargetInput();
        document.getElementById('bodyForm').addEventListener('submit', generatePlan);
    </script>
</body>
</html>
